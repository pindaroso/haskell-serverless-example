#!/bin/bash

APP=code_app_1
INFRA=code_infrastructure_1
PROJECT=example

vagrant ssh -c "docker exec -it $INFRA bash -c 'stack --allow-different-user setup'"
vagrant ssh -c "docker exec -it $APP bash -c 'cd src && stack --allow-different-user build'"
vagrant ssh -c "./code/infrastructure/.stack-work/dist/x86_64-linux/Cabal-1.22.5.0/build/main/main \
    lambda build --build-target $PROJECT --source-directory $PROEJCT/"
